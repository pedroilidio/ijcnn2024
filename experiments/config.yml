defaults:
  aliases:
    estimator:
      params: {}

  runs:
    active: false
    metaestimator: null
    directory: runs
    cv:
      call: sklearn.model_selection.cross_validate
      params:
        return_estimator: false
        return_train_score: false
        scoring:
          - f1_macro
          - f1_micro
          - f1_weighted
          - f1_samples
          - precision_macro
          - precision_micro
          - precision_weighted
          - precision_samples
          - recall_macro
          - recall_micro
          - recall_weighted
          - recall_samples
          - jaccard_macro
          - jaccard_micro
          - jaccard_weighted
          - jaccard_samples
          - roc_auc_ovr
          - roc_auc_ovr_weighted
          - roc_auc_ovo
          - roc_auc_ovo_weighted
          - average_precision
          - neg_log_loss
          - neg_brier_score
          - accuracy
          - balanced_accuracy
          # - matthews_corrcoef
        n_jobs: 5
        cv:
          !!python/object/apply:estimators.make_iterative_stratification
          kwds: {n_splits: 5}
        verbose: 10

aliases:
  dataset:
  - name: genbase
    call: run_cascades.load_dataset_wrapper
    params:
      dataset: genbase
  
  - name: Corel5k
    call: run_cascades.load_dataset_wrapper
    params:
      dataset: Corel5k
  - name: bibtex
    call: run_cascades.load_dataset_wrapper
    params:
      dataset: bibtex
  - name: birds
    call: run_cascades.load_dataset_wrapper
    params:
      dataset: birds
  - name: delicious
    call: run_cascades.load_dataset_wrapper
    params:
      dataset: delicious
  - name: emotions
    call: run_cascades.load_dataset_wrapper
    params:
      dataset: emotions
  - name: enron
    call: run_cascades.load_dataset_wrapper
    params:
      dataset: enron
  - name: mediamill
    call: run_cascades.load_dataset_wrapper
    params:
      dataset: mediamill
  - name: medical
    call: run_cascades.load_dataset_wrapper
    params:
      dataset: medical
  - name: rcv1subset1
    call: run_cascades.load_dataset_wrapper
    params:
      dataset: rcv1subset1

  # 'rcv1subset2',
  # 'rcv1subset3',
  # 'rcv1subset4',
  # 'rcv1subset5',

  - name: scene
    call: run_cascades.load_dataset_wrapper
    params:
      dataset: scene
  - name: tmc2007_500
    call: run_cascades.load_dataset_wrapper
    params:
      dataset: tmc2007_500
  - name: yeast
    call: run_cascades.load_dataset_wrapper
    params:
      dataset: yeast

  estimator:
  - name: proba
    call: estimators.cascade_original
  - name: proba_weak
    call: estimators.cascade_weak_label_original
  - name: embedding
    call: estimators.cascade_tree_embedder
  - name: embedding_weak
    call: estimators.cascade_weak_label_tree_embedder

  wrapper:
    - name: drop90
      call: positive_dropper.wrap_estimator
      params:
        drop: 0.9
        random_state: 0
    - name: drop80
      call: positive_dropper.wrap_estimator
      params:
        drop: 0.8
        random_state: 0
    - name: drop70
      call: positive_dropper.wrap_estimator
      params:
        drop: 0.7
        random_state: 0
    - name: drop60
      call: positive_dropper.wrap_estimator
      params:
        drop: 0.6
        random_state: 0
    - name: drop50
      call: positive_dropper.wrap_estimator
      params:
        drop: 0.5
        random_state: 0
    - name: drop40
      call: positive_dropper.wrap_estimator
      params:
        drop: 0.4
        random_state: 0
    - name: drop30
      call: positive_dropper.wrap_estimator
      params:
        drop: 0.3
        random_state: 0
    - name: drop20
      call: positive_dropper.wrap_estimator
      params:
        drop: 0.2
        random_state: 0


runs:
  - estimator:
    - proba
    - proba_weak
    - embedding
    - embedding_weak
    dataset:
    - bibtex
    - birds
    - delicious
    - mediamill
    - rcv1subset1
    - tmc2007_500
    - genbase
    - emotions
    - enron
    - medical
    - scene
    - yeast
    - Corel5k
    active: false

  - estimator:
    - proba_weak
    - embedding_weak
    - proba
    - embedding
    dataset:
    - scene
    - yeast
    - tmc2007_500
    - medical
    wrapper:
    - null
    # - drop20
    - drop30
    # - drop40
    - drop50
    # - drop60
    # - drop70
    - drop80
    # - drop90
    active: false

  - dataset:
    - Corel5k  # too big
    - bibtex
    - birds
    - delicious  # too big
    - mediamill  # too big
    - rcv1subset1
    - tmc2007_500  # already ran
    - genbase
    - emotions
    - enron
    - medical  # already ran
    - scene  # already ran
    - yeast  # already ran
    estimator:
    # - proba_weak
    - embedding_weak
    # - proba
    - embedding

    wrapper:
    - null
    # - drop20
    - drop30
    # - drop40
    - drop50
    # - drop60
    # - drop70
    - drop80
    # - drop90
    active: true
    # cv:
    #   params:
    #     n_jobs: 3
