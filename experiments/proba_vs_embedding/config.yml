defaults:
  aliases:
    estimator:
      params: {}
    dataset:
      call: run_cascades.load_dataset_wrapper
      params:
        min_positives: 15  # Minimum number of positive labels at each column

  runs:
    active: false
    metaestimator: null
    directory: proba_vs_embedding/runs
    cv:
      call: sklearn.model_selection.cross_validate
      params:
        return_estimator: false
        return_train_score: false
        scoring:
          #!!python/object/apply:proba_vs_embedding.estimators.get_scoring_metrics {}
          # !!python/object/apply:proba_vs_embedding.estimators.get_get_level_scores {}
          - f1_macro
          - f1_micro
          - f1_weighted
          - f1_samples
          - precision_macro
          - precision_micro
          - precision_weighted
          - precision_samples
          - recall_macro
          - recall_micro
          - recall_weighted
          - recall_samples
          - jaccard_macro
          - jaccard_micro
          - jaccard_weighted
          - jaccard_samples
          - accuracy
          # - !!python/object:sklearn.metrics.label_ranking_average_precision_score {}
          # - !!python/object:sklearn.metrics.label_ranking_loss {}
          # No multi-label:
          # - roc_auc_ovr
          # - roc_auc_ovr_weighted
          # - roc_auc_ovo
          # - roc_auc_ovo_weighted
          # - average_precision
          # - neg_log_loss
          # - neg_brier_score
          # - balanced_accuracy
          # - matthews_corrcoef
        n_jobs: 5
        cv:
          !!python/object/apply:proba_vs_embedding.estimators.make_iterative_stratification
          kwds: {n_splits: 5}
        verbose: 10

aliases:
  dataset:
  - name: genbase
    params:
      dataset: genbase
  
  - name: Corel5k
    params:
      dataset: Corel5k
  - name: bibtex
    params:
      dataset: bibtex
  - name: birds
    params:
      dataset: birds
  - name: delicious
    params:
      dataset: delicious
  - name: emotions
    params:
      dataset: emotions
  - name: enron
    params:
      dataset: enron
  - name: mediamill
    params:
      dataset: mediamill
  - name: medical
    params:
      dataset: medical
  - name: rcv1subset1
    params:
      dataset: rcv1subset1
  - name: rcv1subset2
    params:
      dataset: rcv1subset2
  - name: rcv1subset3
    params:
      dataset: rcv1subset3
  - name: rcv1subset4
    params:
      dataset: rcv1subset4
  - name: rcv1subset5
    params:
      dataset: rcv1subset5
  - name: scene
    params:
      dataset: scene
  - name: tmc2007_500
    params:
      dataset: tmc2007_500
  - name: yeast
    params:
      dataset: yeast

  estimator:
  - name: proba
    call: proba_vs_embedding.estimators.cascade_proba

  - name: proba_weak
    call: proba_vs_embedding.estimators.cascade_weak_label_proba

  - name: embedding
    call: proba_vs_embedding.estimators.cascade_tree_embedder

  - name: embedding_chi2
    call: proba_vs_embedding.estimators.cascade_tree_embedder_pvalue

  - name: embedding_proba
    call: proba_vs_embedding.estimators.cascade_tree_embedder_proba

  - name: embedding_weak
    call: proba_vs_embedding.estimators.cascade_weak_label_tree_embedder

  - name: embedding_weak_chi2
    call: proba_vs_embedding.estimators.cascade_weak_label_tree_embedder_pvalue

  wrapper:
    - name: drop90
      call: positive_dropper.wrap_estimator
      params:
        drop: 0.9
        random_state: 0
    - name: drop80
      call: positive_dropper.wrap_estimator
      params:
        drop: 0.8
        random_state: 0
    - name: drop70
      call: positive_dropper.wrap_estimator
      params:
        drop: 0.7
        random_state: 0
    - name: drop60
      call: positive_dropper.wrap_estimator
      params:
        drop: 0.6
        random_state: 0
    - name: drop50
      call: positive_dropper.wrap_estimator
      params:
        drop: 0.5
        random_state: 0
    - name: drop40
      call: positive_dropper.wrap_estimator
      params:
        drop: 0.4
        random_state: 0
    - name: drop30
      call: positive_dropper.wrap_estimator
      params:
        drop: 0.3
        random_state: 0
    - name: drop20
      call: positive_dropper.wrap_estimator
      params:
        drop: 0.2
        random_state: 0


runs:
  - wrapper:
    - null
    # - drop20
    # - drop40
    # - drop50
    # - drop70
    # - drop60
    # - drop30
    # - drop80
    # - drop90
    dataset:       # n_samples
    - emotions     # 593
    - birds        # 645
    - genbase      # 662
    - medical      # 978
    - enron        # 1702
    - scene        # 2407
    - yeast        # 2417
    - Corel5k      # 5000
    - rcv1subset3  # 6000
    - rcv1subset4  # 6000
    - rcv1subset5  # 6000
    - rcv1subset1  # 6000
    - rcv1subset2  # 6000
    - bibtex       # 7395
    - delicious    # 16105
    - tmc2007_500  # 28596
    - mediamill    # 43907
    estimator:
    - embedding_proba
    - embedding_chi2
    - proba
    - embedding
    - proba_weak
    - embedding_weak
    - embedding_weak_chi2
    active: true