defaults:
  aliases:
    estimator:
      params: {}
    dataset:
      call: data_loaders.load_nakano
      params:
        min_positives: 30

  runs:
    directory: nakano_datasets_per_level/runs
    active: false
    metaestimator: null
    cv:
      call: nakano_datasets_v2.cross_validation.cross_validate_cascade_levels
      params:
        # error_score: raise  # debug
        # n_jobs: 1  # debug
        n_jobs: 5
        return_fitted_params:
        - n_components_
        - label_frequency_estimates_
        - enable_imputation_
        return_train_score: true
        scoring:
          !!python/name:nakano_datasets_v2.scoring.all_scorers ''
        cv:
          !!python/object/apply:nakano_datasets_v2.estimators.make_iterative_stratification
          kwds: {n_splits: 5}
        verbose: 10

aliases:
  dataset:
  - name: CAL500
    params:
      path: nakano_datasets_v2/datasets/MLC/CAL500.csv
  
  - name: CHD_49
    params:
      path: nakano_datasets_v2/datasets/MLC/CHD_49.csv
  
  - name: Gram_negative
    params:
      path: nakano_datasets_v2/datasets/MLC/Gram_negative.csv
  
  - name: Gram_positive
    params:
      path: nakano_datasets_v2/datasets/MLC/Gram_positive.csv
  
  - name: GrampositivePseAAC
    params:
      path: nakano_datasets_v2/datasets/MLC/GrampositivePseAAC.csv
  
  - name: LLOG
    params:
      path: nakano_datasets_v2/datasets/MLC/LLOG.csv
  
  - name: PlantGO
    params:
      path: nakano_datasets_v2/datasets/MLC/PlantGO.csv

  - name: VirusGO
    params:
      path: nakano_datasets_v2/datasets/MLC/VirusGO.csv
  
  - name: VirusPseAAC
    params:
      path: nakano_datasets_v2/datasets/MLC/VirusPseAAC.csv

  - name: VirusPseAAC
    params:
      path: nakano_datasets_v2/datasets/MLC/VirusPseAAC.csv
  
  - name: emotions
    params:
      path: nakano_datasets_v2/datasets/MLC/emotions.csv
  
  - name: flags
    params:
      path: nakano_datasets_v2/datasets/MLC/flags.csv
  
  - name: medical
    params:
      path: nakano_datasets_v2/datasets/MLC/medical.csv
  
  - name: yeast
    params:
      path: nakano_datasets_v2/datasets/MLC/yeast.csv

  - name: scene
    params:
      path: nakano_datasets_v2/datasets/MLC/scene.csv

  - name: genbase
    params:
      path: nakano_datasets_v2/datasets/MLC/genbase.csv
  
  - name: enron
    params:
      path: nakano_datasets_v2/datasets/MLC/enron.csv

  - name: birds
    params:
      path: nakano_datasets_v2/datasets/MLC/birds.csv


  estimator:
  - name: cascade_wang
    call: nakano_datasets_v2.estimators.cascade_wang
  - name: cascade_zhou
    call: nakano_datasets_v2.estimators.cascade_zhou

  - name: cascade_proba
    call: nakano_datasets_v2.estimators.cascade_proba
  - name: cascade_tree_embedder
    call: nakano_datasets_v2.estimators.cascade_tree_embedder
  - name: cascade_tree_embedder_proba
    call: nakano_datasets_v2.estimators.cascade_tree_embedder_proba
  - name: cascade_tree_embedder_chi2
    call: nakano_datasets_v2.estimators.cascade_tree_embedder_chi2

  - name: cascade_lc_proba
    call: nakano_datasets_v2.estimators.cascade_lc_proba
  - name: cascade_lc_tree_embedder
    call: nakano_datasets_v2.estimators.cascade_lc_tree_embedder
  - name: cascade_lc_tree_embedder_proba
    call: nakano_datasets_v2.estimators.cascade_lc_tree_embedder_proba
  - name: cascade_lc_tree_embedder_chi2
    call: nakano_datasets_v2.estimators.cascade_lc_tree_embedder_chi2

  - name: cascade_scar_proba
    call: nakano_datasets_v2.estimators.cascade_scar_proba
  - name: cascade_scar_tree_embedder
    call: nakano_datasets_v2.estimators.cascade_scar_tree_embedder
  - name: cascade_scar_tree_embedder_proba
    call: nakano_datasets_v2.estimators.cascade_scar_tree_embedder_proba
  - name: cascade_scar_tree_embedder_chi2
    call: nakano_datasets_v2.estimators.cascade_scar_tree_embedder_chi2


  wrapper:
  - name: drop90
    call: positive_dropper.wrap_estimator
    params:
      drop: 0.9
      random_state: 0
  - name: drop80
    call: positive_dropper.wrap_estimator
    params:
      drop: 0.8
      random_state: 0
  - name: drop70
    call: positive_dropper.wrap_estimator
    params:
      drop: 0.7
      random_state: 0
  - name: drop60
    call: positive_dropper.wrap_estimator
    params:
      drop: 0.6
      random_state: 0
  - name: drop50
    call: positive_dropper.wrap_estimator
    params:
      drop: 0.5
      random_state: 0
  - name: drop40
    call: positive_dropper.wrap_estimator
    params:
      drop: 0.4
      random_state: 0
  - name: drop30
    call: positive_dropper.wrap_estimator
    params:
      drop: 0.3
      random_state: 0
  - name: drop20
    call: positive_dropper.wrap_estimator
    params:
      drop: 0.2
      random_state: 0


runs:
  # TEST
  - wrapper:
      - drop50
    dataset: PlantGO
    estimator:
    - cascade_zhou
    active: false
    cv:
      params:
        n_jobs: 1
        error_score: raise

  - wrapper: null
    dataset: flags
    estimator: cascade_wang
    active: true

  - wrapper:
    - drop30
    - drop50
    - drop70
    - null
    # # - drop20
    # # - drop40
    # # - drop60
    # # - drop80
    # - drop90
    dataset:              # n_samples  n_features  n_labels   y_size
    - VirusGO             #     207         749         6     1242
    - VirusPseAAC         #     207         440         6     1242
    - flags               #     194          19         7     1358
    - Gram_positive       #     519         912         4     2076
    - GrampositivePseAAC  #     519         440         4     2076
    - CHD_49              #     555          49         6     3330
    - emotions            #     593          72         6     3558
    - Gram_negative       #    1392        1717         8    11136
    - PlantGO             #     978        3091        12    11736
    - birds               #     645         260        19    12255
    - scene               #    2407         294         6    14442
    # - genbase             #     662        1185        27    17874
    - yeast               #    2417         103        14    33838
    - medical             #     978        1449        45    44010
    # - CAL500              #     502          68       174    87348
    - enron               #    1702        1001        53    90206  # too many labels for tice
    # - LLOG                #    1460          75      1004  1465840  # too many labels for tice
    estimator:
    - cascade_wang
    # - cascade_proba
    # - cascade_tree_embedder
    # - cascade_tree_embedder_proba
    # # - cascade_tree_embedder_chi2

    # - cascade_lc_tree_embedder
    # - cascade_lc_tree_embedder_proba
    # - cascade_lc_proba
    # # - cascade_lc_tree_embedder_chi2

    # # - cascade_scar_tree_embedder
    # - cascade_scar_proba
    # - cascade_scar_tree_embedder_proba
    # # - cascade_scar_tree_embedder_chi2
    active: false

  - wrapper:
    - drop30
    - drop50
    - drop70
    - null
    # # - drop20
    # # - drop40
    # # - drop60
    # # - drop80
    # - drop90
    dataset:              # n_samples  n_features  n_labels   y_size
    - VirusGO             #     207         749         6     1242
    - VirusPseAAC         #     207         440         6     1242
    - flags               #     194          19         7     1358
    - Gram_positive       #     519         912         4     2076
    - GrampositivePseAAC  #     519         440         4     2076
    - CHD_49              #     555          49         6     3330
    - emotions            #     593          72         6     3558
    - Gram_negative       #    1392        1717         8    11136
    - PlantGO             #     978        3091        12    11736
    - birds               #     645         260        19    12255
    - scene               #    2407         294         6    14442
    # - genbase             #     662        1185        27    17874
    - yeast               #    2417         103        14    33838
    - medical             #     978        1449        45    44010
    - CAL500              #     502          68       174    87348
    - enron               #    1702        1001        53    90206
    - LLOG                #    1460          75      1004  1465840
    estimator:
    - cascade_zhou
    active: false
 
  # Run again.
  - wrapper:
    - null
    # - drop20
    # - drop30
    # - drop40
    - drop50
    # - drop60
    - drop70
    # - drop80
    - drop90
    dataset:              # n_samples  n_features  n_labels   y_size
    - VirusGO             #     207         749         6     1242
    - VirusPseAAC         #     207         440         6     1242
    - flags               #     194          19         7     1358
    - Gram_positive       #     519         912         4     2076
    - GrampositivePseAAC  #     519         440         4     2076
    - CHD_49              #     555          49         6     3330
    - emotions            #     593          72         6     3558
    - Gram_negative       #    1392        1717         8    11136
    - PlantGO             #     978        3091        12    11736
    - birds               #     645         260        19    12255
    - scene               #    2407         294         6    14442
    - genbase             #     662        1185        27    17874
    - yeast               #    2417         103        14    33838
    - medical             #     978        1449        45    44010
    - CAL500              #     502          68       174    87348
    - enron               #    1702        1001        53    90206
    - LLOG                #    1460          75      1004  1465840
    estimator:
    # - cascade_proba
    # - cascade_tree_embedder
    # - cascade_tree_embedder_proba
    - cascade_tree_embedder_chi2

    # - cascade_lc_proba
    # - cascade_lc_tree_embedder
    # - cascade_lc_tree_embedder_proba
    - cascade_lc_tree_embedder_chi2

    - cascade_scar_proba
    - cascade_scar_tree_embedder
    - cascade_scar_tree_embedder_proba
    - cascade_scar_tree_embedder_chi2
    active: false
